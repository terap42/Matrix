<app-base-layout title="Finances" [showBackButton]="true">
  <div class="pt-10 px-4 pb-16 bg-gray-100">
    <!-- Header avec contributions et solde -->
    <div class="flex justify-between mb-6">
      <h1 class="text-xl font-semibold">Mes contributions</h1>
      <h1 class="text-xl font-semibold">Mon solde</h1>
    </div>

    <!-- Cartes de contributions et solde -->
    <div class="flex justify-between mb-6 space-x-2">
      <!-- Carte des contributions -->
      <div class="w-6/12 text-white bg-yellow-500 rounded-xl p-3 relative overflow-hidden">
        <div class="flex justify-between items-start">
          <span class=" opacity-60 text-sm">2024</span>
          <div class="flex space-x-1">
            <span class="opacity-60">•••</span>
          </div>
        </div>
        <div class="mt-2">
          <span *ngIf="showContributionAmount" class="text-xl font-bold">234 000 FCFA</span>
          <span *ngIf="!showContributionAmount" class="text-xl font-bold">••••••</span>
        </div>
        <div class="flex justify-center mt-2">
          <div class="relative w-20 h-20">
            <!-- Cercle de progression -->
            <svg class="w-full h-full" viewBox="0 0 36 36">
              <path class="stroke-current text-gray-300 opacity-30"
                d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none"
                stroke-width="4" stroke-linecap="round" />
              <path class="stroke-current "
                d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none"
                stroke-width="4" stroke-dasharray="70, 100" stroke-linecap="round" />
            </svg>
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xl font-bold ">
              75%
            </div>
          </div>
        </div>
        <button (click)="toggleContributionVisibility()" name="b" type="button" class="absolute bottom-3 left-3">
          <ion-icon [name]="showContributionAmount ? 'eye' : 'eye-off'" class="text-white text-xl w-6 h-6"></ion-icon>
        </button>
      </div>

      <!-- Carte du solde -->
      <div class="w-6/12 bg-green-700 rounded-xl p-3 relative text-white">
        <div class="flex justify-between items-start">
          <span class="opacity-70 text-sm">Mon solde</span>
          <div class="flex space-x-1">
            <span class="opacity-70">•••</span>
          </div>
        </div>
        <div class="mt-2">
          <span *ngIf="showBalanceAmount" class="text-xl font-bold text-white">75 000 FCFA</span>
          <span *ngIf="!showBalanceAmount" class="text-xl font-bold text-white">••••••</span>
        </div>
        <button (click)="toggleBalanceVisibility()" class="mr-2 absolute bottom-3 left-3">
          <ion-icon [name]="showBalanceAmount ? 'eye' : 'eye-off'" class="text-white text-xl w-6 h-6"></ion-icon>
        </button>
        <div class="absolute bottom-3 right-3">
          <ion-icon name="add-circle" class="text-2xl text-white w-16 h-16"></ion-icon>
        </div>
      </div>
    </div>


    <div class="mb-6 p-4 bg-white rounded-xl shadow-sm">
      <div class="flex justify-between items-center mb-2">
        <h2 class="text-lg font-semibold">Zakat Tracker</h2>
        <span class="text-sm font-semibold text-gray-500">2024</span>
      </div>
      <div class="relative pt-1">
        <div class="flex items-center justify-between mb-1">
          <div>
            <span class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full bg-green-700 text-white">
              68%
            </span>
          </div>
          <div class="text-right">
            <span class="text-xs font-semibold inline-block text-gray-600">
              180 000 FCFA / 350 000 FCFA
            </span>
          </div>
        </div>
        <div class="overflow-hidden h-2 mb-1 text-xs flex rounded bg-gray-200">
          <div style="width: 68%"
            class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-green-700"></div>
        </div>
      </div>
    </div>

    <!-- Section levée de fonds -->
    <div class="mb-6">
      <h2 class="text-lg font-semibold mb-3">Levée de fonds</h2>
      <div class="overflow-x-auto pb-2">
        <div class="flex space-x-4">
          <!-- Carte 1 -->
          <div class="min-w-56 bg-white p-3 rounded-xl shadow-sm">
            <h3 class="text-green-700 font-semibold mb-1">Mosquée Medina Baye</h3>
            <div class="w-full bg-gray-200 rounded-full h-1.5 mb-2">
              <div class="bg-green-700 h-1.5 rounded-full" style="width: 35%"></div>
            </div>
            <div>
              <p class="text-base font-bold">1 23 000 000 FCFA</p>
              <p class="text-xs text-gray-500">1240 contributions</p>
            </div>
          </div>

          <!-- Carte 2 -->
          <div class="min-w-56 bg-white p-3 rounded-xl shadow-sm">
            <h3 class="text-green-700 font-semibold mb-1">Musée Cheikh Al Islami</h3>
            <div class="w-full bg-gray-200 rounded-full h-1.5 mb-2">
              <div class="bg-green-700 h-1.5 rounded-full" style="width: 65%"></div>
            </div>
            <div>
              <p class="text-base font-bold">45 000 000 FCFA</p>
              <p class="text-xs text-gray-500">340 contributions</p>
            </div>
          </div>

          <!-- Carte 3 (partiellement visible) -->
          <div class="min-w-56 bg-white p-3 rounded-xl shadow-sm">
            <h3 class="text-green-700 font-semibold mb-1">Daara Serigne...</h3>
            <div class="w-full bg-gray-200 rounded-full h-1.5 mb-2">
              <div class="bg-green-700 h-1.5 rounded-full" style="width: 70%"></div>
            </div>
            <div>
              <p class="text-base font-bold">45 000 000 FCFA</p>
              <p class="text-xs text-gray-500">340 contributions</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Historique de contribution -->
    <div>
      <h2 class="text-lg font-semibold mb-3">Historique de contribution</h2>
      <div class="bg-white p-4 rounded-xl shadow-sm">
        <div class="flex justify-between items-start">
          <div class="flex items-center">
            <div class="mr-3 bg-gray-100 rounded-full p-2">
              <ion-icon name="arrow-back-outline" class="text-red-500 text-lg"></ion-icon>
            </div>
            <div>
              <p class="font-semibold">50 000 FCFA</p>
              <p class="text-xs text-gray-500">Rénovation Mosquée Medina Baye</p>
            </div>
          </div>
          <div class="text-right">
            <p class="text-xs text-gray-500">Via Orange Money</p>
            <p class="text-xs text-gray-500">20 Octobre 2024 à 20:31</p>
          </div>
        </div>
      </div>
    </div>
  </div>

</app-base-layout>